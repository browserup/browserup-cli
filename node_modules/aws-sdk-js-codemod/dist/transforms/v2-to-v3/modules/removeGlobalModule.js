"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeGlobalModule = void 0;
const config_1 = require("../config");
const hasImportEquals_1 = require("./hasImportEquals");
const hasRequire_1 = require("./hasRequire");
const removeImportDefault_1 = require("./removeImportDefault");
const removeImportEquals_1 = require("./removeImportEquals");
const removeRequireIdentifier_1 = require("./removeRequireIdentifier");
const removeGlobalModule = (j, source, v2GlobalName) => {
    const identifierUsages = source.find(j.Identifier, { name: v2GlobalName });
    // Only usage is import/require.
    if (identifierUsages.size() === 1) {
        const defaultOptions = { localName: v2GlobalName, sourceValue: config_1.PACKAGE_NAME };
        if ((0, hasRequire_1.hasRequire)(j, source)) {
            (0, removeRequireIdentifier_1.removeRequireIdentifier)(j, source, defaultOptions);
        }
        else if ((0, hasImportEquals_1.hasImportEquals)(j, source)) {
            (0, removeImportEquals_1.removeImportEquals)(j, source, defaultOptions);
        }
        else {
            (0, removeImportDefault_1.removeImportDefault)(j, source, defaultOptions);
        }
    }
};
exports.removeGlobalModule = removeGlobalModule;
