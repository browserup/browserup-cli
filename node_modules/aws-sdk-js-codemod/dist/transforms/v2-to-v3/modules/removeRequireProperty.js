"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeRequireProperty = void 0;
const getRequireDeclaratorsWithProperty_1 = require("./getRequireDeclaratorsWithProperty");
const removeRequireProperty = (j, source, { localName, propertyName, sourceValue }) => {
    const requireDeclarators = (0, getRequireDeclaratorsWithProperty_1.getRequireDeclaratorsWithProperty)(j, source, {
        identifierName: propertyName,
        localName,
        sourceValue,
    });
    requireDeclarators.forEach((varDeclarator) => {
        const varDeclarationCollection = j(varDeclarator).closest(j.VariableDeclaration);
        // Remove VariableDeclarator as it contains the only identifier.
        j(varDeclarator).remove();
        // Remove VariableDeclaration if there are no declarations.
        const varDeclaration = varDeclarationCollection.nodes()[0];
        if (varDeclaration && varDeclaration.declarations?.length === 0) {
            varDeclarationCollection.remove();
        }
    });
};
exports.removeRequireProperty = removeRequireProperty;
