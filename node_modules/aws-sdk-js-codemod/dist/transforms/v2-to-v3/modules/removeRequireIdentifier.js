"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeRequireIdentifier = void 0;
const getRequireDeclaratorsWithIdentifier_1 = require("./getRequireDeclaratorsWithIdentifier");
const removeRequireIdentifier = (j, source, { localName, sourceValue }) => {
    const requireDeclarators = (0, getRequireDeclaratorsWithIdentifier_1.getRequireDeclaratorsWithIdentifier)(j, source, {
        identifierName: localName,
        sourceValue,
    });
    requireDeclarators.forEach((varDeclarator) => {
        const varDeclarationCollection = j(varDeclarator).closest(j.VariableDeclaration);
        // Remove VariableDeclarator as it contains the only identifier.
        j(varDeclarator).remove();
        // Remove VariableDeclaration if there are no declarations.
        const varDeclaration = varDeclarationCollection.nodes()[0];
        if (varDeclaration && varDeclaration.declarations?.length === 0) {
            varDeclarationCollection.remove();
        }
    });
};
exports.removeRequireIdentifier = removeRequireIdentifier;
