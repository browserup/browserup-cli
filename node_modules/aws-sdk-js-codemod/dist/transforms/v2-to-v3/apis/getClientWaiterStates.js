"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getClientWaiterStates = void 0;
const getClientIdentifiers_1 = require("./getClientIdentifiers");
const getClientWaiterStates = (j, source, options) => {
    const waiterStates = [];
    const clientIdentifiers = (0, getClientIdentifiers_1.getClientIdentifiers)(j, source, options);
    for (const clientId of clientIdentifiers) {
        source
            .find(j.CallExpression, {
            callee: {
                type: "MemberExpression",
                object: clientId,
                property: { type: "Identifier", name: "waitFor" },
            },
        })
            .forEach((waiterCallExpression) => {
            // @ts-expect-error arguments[0] is Literal or StringLiteral
            const waiterState = waiterCallExpression.value.arguments[0].value;
            waiterStates.push(waiterState);
        });
    }
    return new Set(waiterStates);
};
exports.getClientWaiterStates = getClientWaiterStates;
